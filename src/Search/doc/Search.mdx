---
name: Search
route: /search
---

import { Playground, PropsTable } from 'docz';
import GuideExample from '../../../docz/GuideExample';

import { MenuItem } from '../../Menu';
import { ListItem, ListItemTitle, ListItemSubtitle } from '../../List';

import GlobeIcon from 'calcite-ui-icons-react/GlobeIcon';
import FileMagnifyingGlassIcon from 'calcite-ui-icons-react/FileMagnifyingGlassIcon';
import MagnifyingGlassIcon from 'calcite-ui-icons-react/MagnifyingGlassIcon';
import XCircleIcon from 'calcite-ui-icons-react/XCircleIcon';

import statesJson from '../../../docz/_sampleJson/states.json';
import statesJson2 from '../../../docz/_sampleJson/states_objects.json';
import Search from '../';

import { CalciteTheme } from '../../CalciteThemeProvider';
import StyledSearch from './StyledSearch';

# Search

Search input with specific styles.

#### Import Syntax

```js
import Search from 'calcite-react/Search';
```

## Basic Usage

<Playground style={{ height: '400px'}}>
  {() => {
      const items = [...statesJson.states];
        
      class SearchStory extends React.Component {

        constructor(props) {
          super(props);

          this.state = {
            inputValue: '',
            selectedItem: ''
          };

          this.searchChanged = this.searchChanged.bind(this);
          this.clearSearch = this.clearSearch.bind(this);
          this.onUserAction = this.onUserAction.bind(this);
        }

        searchChanged(e) {
          this.setState({
            selectedItem: e
          });
        };

        clearSearch() {
          this.setState({
            inputValue: '',
            selectedItem: ''
          });
        };

        onUserAction(inputValue, selectedItemVal) {
          this.setState({
            inputValue: inputValue,
            selectedItem: selectedItemVal
          });
        };

        render() {
          return (
            <Search
              inputValue={this.state.inputValue}
              selectedItem={this.state.selectedItem}
              items={items}
              onChange={this.searchChanged}
              onUserAction={this.onUserAction}
              onRequestClear={this.clearSearch}
            />
          );
        }
      }

      return <SearchStory />;
    }}

</Playground>

## Alternate Styles

<Playground style={{ height: '400px'}}>
  {() => {
      const items = [...statesJson.states];
        
      class SearchStory extends React.Component {

        constructor(props) {
          super(props);

          this.state = {
            inputValue: '',
            selectedItem: ''
          };

          this.searchChanged = this.searchChanged.bind(this);
          this.clearSearch = this.clearSearch.bind(this);
          this.onUserAction = this.onUserAction.bind(this);
        }

        searchChanged(e) {
          this.setState({
            selectedItem: e
          });
        };

        clearSearch() {
          this.setState({
            inputValue: '',
            selectedItem: ''
          });
        };

        onUserAction(inputValue, selectedItemVal) {
          this.setState({
            inputValue: inputValue,
            selectedItem: selectedItemVal
          });
        };

        render() {
          return (
            <React.Fragment>
              <GuideExample label="minimal">
                <Search
                  inputValue={this.state.inputValue}
                  selectedItem={this.state.selectedItem}
                  items={items}
                  minimal
                  onChange={this.searchChanged}
                  onUserAction={this.onUserAction}
                  onRequestClear={this.clearSearch}
                />
              </GuideExample>
              <GuideExample label="appendToBody">
                <Search
                  inputValue={this.state.inputValue}
                  selectedItem={this.state.selectedItem}
                  items={items}
                  appendToBody
                  onChange={this.searchChanged}
                  onUserAction={this.onUserAction}
                  onRequestClear={this.clearSearch}
                />
              </GuideExample>
              <GuideExample label="fullWidth">
                <Search
                  inputValue={this.state.inputValue}
                  selectedItem={this.state.selectedItem}
                  items={items}
                  fullWidth
                  onChange={this.searchChanged}
                  onUserAction={this.onUserAction}
                  onRequestClear={this.clearSearch}
                />
              </GuideExample>
            </React.Fragment>
          );
        }
      }

      return <SearchStory />;
    }}

</Playground>

## Use Remote API

<Playground style={{ height: '400px'}}>
  {() => {
      class SearchStory extends React.Component {

        constructor(props) {
          super(props);

          this.state = {
            items: [],
            inputValue: '',
            selectedItem: ''
          };

          this.searchChanged = this.searchChanged.bind(this);
          this.clearSearch = this.clearSearch.bind(this);
          this.onUserAction = this.onUserAction.bind(this);
        }

        searchChanged(e) {
          this.setState({
            selectedItem: e
          });
        };

        clearSearch() {
          this.setState({
            inputValue: '',
            selectedItem: ''
          });
        };

        onUserAction(inputValue, selectedItemVal) {
          this.setState({
            inputValue: inputValue,
            selectedItem: selectedItemVal
          });

          if (!inputValue) {
            this.setState({ items: [] });
            return;
          };

          if (inputValue === this.state.inputValue) {
            return;
          }

          this.fetchStates(inputValue).then(states => {
            const items = states.map(state => {
              return {
                label: state.attributes.STATE_NAME,
                value: state.attributes.STATE_NAME
              }
            });

            this.setState({ items });
          });
        };

        fetchStates(q) {
          return new Promise((resolve, response) => {
            const url = `https://services.arcgis.com/P3ePLMYs2RVChkJx/ArcGIS/rest/services/USA_States_Generalized/FeatureServer/0/query?where=UPPER(STATE_NAME) LIKE UPPER('${q}%')&outFields=STATE_NAME,POPULATION&returnGeometry=false&orderByFields=STATE_NAME asc&f=json`;
            fetch(window.encodeURI(url))
              .then(response => response.json())
              .then(json => resolve(json.features));
          });
        };

        render() {
          return (
            <React.Fragment>
              <GuideExample label="remote">
                <Search
                  inputValue={this.state.inputValue}
                  selectedItem={this.state.selectedItem}
                  items={this.state.items}
                  minimal
                  onChange={this.searchChanged}
                  onUserAction={this.onUserAction}
                  onRequestClear={this.clearSearch}
                  remote={true}
                />
              </GuideExample>
            </React.Fragment>
          );
        }
      }

      return <SearchStory />;
    }}

</Playground>

## Replace Search Icon

<Playground>
  <GuideExample label="searchIcon={<FileMagnifyingGlassIcon size={16} />}">
    <Search searchIcon={<FileMagnifyingGlassIcon size={16} />} />
  </GuideExample>
  <GuideExample label="searchIcon={false}">
    <Search searchIcon={false} />
  </GuideExample>
</Playground>

## Array of Objects

<Playground style={{ height: '400px'}}>
  {() => {
      const items = [...statesJson2.states];
      
      const dataSourceConfig = {
        label: 'name',
        value: 'abbrev'
      };

      class SearchStory extends React.Component {
        constructor(props) {
          super(props);

          this.state = {
            inputValue: '',
            selectedItem: ''
          };

          this.searchChanged = this.searchChanged.bind(this);
          this.clearSearch = this.clearSearch.bind(this);
          this.onUserAction = this.onUserAction.bind(this);
        }

        searchChanged(e) {
          this.setState({
            selectedItem: e
          });
        };

        clearSearch() {
          this.setState({
            inputValue: '',
            selectedItem: ''
          });
        };

        onUserAction(inputValue, selectedItemVal) {
          this.setState({
            inputValue: inputValue,
            selectedItem: selectedItemVal
          });
        };

        render() {
          return (
            <Search
              dataSourceConfig={dataSourceConfig}
              inputValue={this.state.inputValue}
              selectedItem={this.state.selectedItem}
              items={items}
              onChange={this.searchChanged}
              onUserAction={this.onUserAction}
              onRequestClear={this.clearSearch}
            />
          );
        }
      }

      return <SearchStory />;
    }}

</Playground>

## Child Items

<Playground style={{ height: '400px'}}>
  {() => {
      const items = [...statesJson2.states];
      
      const dataSourceConfig = {
        label: 'name',
        value: 'abbrev'
      };

      class SearchStory extends React.Component {
        constructor(props) {
          super(props);

          this.state = {
            inputValue: '',
            selectedItem: ''
          };

          this.searchChanged = this.searchChanged.bind(this);
          this.clearSearch = this.clearSearch.bind(this);
          this.onUserAction = this.onUserAction.bind(this);
        }

        searchChanged(e) {
          this.setState({
            selectedItem: e
          });
        };

        clearSearch() {
          this.setState({
            inputValue: '',
            selectedItem: ''
          });
        };

        onUserAction(inputValue, selectedItemVal) {
          this.setState({
            inputValue: inputValue,
            selectedItem: selectedItemVal
          });
        };

        render() {
          return (
            <Search
              dataSourceConfig={dataSourceConfig}
              inputValue={this.state.inputValue}
              selectedItem={this.state.selectedItem}
              onChange={this.searchChanged}
              onUserAction={this.onUserAction}
              onRequestClear={this.clearSearch}
            >
              {items.map(item => {
                return (
                  <MenuItem key={item.abbrev} item={item}>
                    {item.name}
                  </MenuItem>
                );
              })}
            </Search>
          );
        }
      }

      return <SearchStory />;
    }}

</Playground>

## Custom Items

<Playground style={{ height: '400px'}}>
  {() => {
      const items = [...statesJson2.states];

      class SearchStory extends React.Component {
        constructor(props) {
          super(props);

          this.state = {
            inputValue: '',
            selectedItem: ''
          };

          this.searchChanged = this.searchChanged.bind(this);
          this.clearSearch = this.clearSearch.bind(this);
          this.onUserAction = this.onUserAction.bind(this);
        }

        searchChanged(e) {
          this.setState({
            selectedItem: e
          });
        };

        clearSearch() {
          this.setState({
            inputValue: '',
            selectedItem: ''
          });
        };

        onUserAction(inputValue, selectedItemVal) {
          this.setState({
            inputValue: inputValue,
            selectedItem: selectedItemVal
          });
        };

        render() {
          return (
            <Search
              inputValue={this.state.inputValue}
              selectedItem={this.state.selectedItem}
              onChange={this.searchChanged}
              onUserAction={this.onUserAction}
              onRequestClear={this.clearSearch}
            >
              {items.map(item => {
                return (
                  <ListItem
                    key={item.abbrev}
                    value={item.abbrev}
                    label={item.name}
                    leftNode={<GlobeIcon size={32} />}
                  >
                    <ListItemTitle>{item.name}</ListItemTitle>
                    <ListItemSubtitle>{item.abbrev}</ListItemSubtitle>
                  </ListItem>
                );
              })}
            </Search>
          );
        }
      }

      return <SearchStory />;
    }}

</Playground>

## Dumb Input

<Playground>
  {() => {
      class SearchStory extends React.Component {
        constructor(props) {
          super(props);

          this.state = {
            inputValue: ''
          };

          this.clearSearch = this.clearSearch.bind(this);
          this.onUserAction = this.onUserAction.bind(this);
        }

        clearSearch() {
          this.setState({
            inputValue: ''
          });
        };

        onUserAction(inputValue) {
          this.setState({
            inputValue: inputValue
          });
        };

        render() {
          return (
            <React.Fragment>
              <GuideExample>
                <Search
                  inputValue={this.state.inputValue}
                  onUserAction={this.onUserAction}
                  onRequestClear={this.clearSearch}
                />
              </GuideExample>
              <GuideExample label="uncontrolled">
                <Search />
              </GuideExample>
            </React.Fragment>
          );
        }
      }

      return <SearchStory />;
    }}

</Playground>

## Shortcut Character

<Playground style={{ height: '400px'}}>
  {() => {
      const items = [...statesJson.states];

      class SearchStory extends React.Component {
        constructor(props) {
          super(props);

          this.state = {
            inputValue: '',
            selectedItem: '',
            searchInput: null
          };

          this.handleKeypress = this.handleKeypress.bind(this);
          this.setSearchInput = this.setSearchInput.bind(this);
          this.searchChanged = this.searchChanged.bind(this);
          this.clearSearch = this.clearSearch.bind(this);
          this.onUserAction = this.onUserAction.bind(this);
        }

        componentDidMount() {
          document.body.addEventListener('keypress', this.handleKeypress);
        }

        componentWillUnmount() {
          document.body.removeEventListener('keypress', this.handleKeypress);
        }

        handleKeypress(e) {
          if (
            e.key === '/' &&
            document.activeElement !== this.state.searchInput
          ) {
            // Stop the typed character from being inserted in the input
            e.preventDefault();

            // Focus the input
            this.state.searchInput.focus();
          }
        };

        setSearchInput(searchInput) {
          this.setState({
            searchInput
          });
        };

        searchChanged(e) {
          this.setState({
            selectedItem: e
          });
        };

        clearSearch() {
          this.setState({
            inputValue: '',
            selectedItem: ''
          });
        };

        onUserAction(inputValue, selectedItemVal) {
          this.setState({
            inputValue: inputValue,
            selectedItem: selectedItemVal
          });
        };

        render() {
          return (
            <Search
              inputRef={this.setSearchInput}
              shortcutCharacter="/"
              inputValue={this.state.inputValue}
              selectedItem={this.state.selectedItem}
              items={items}
              onChange={this.searchChanged}
              onUserAction={this.onUserAction}
              onRequestClear={this.clearSearch}
            />
          );
        }
      }

      return <SearchStory />;
    }}

</Playground>

## Virtualized

<Playground style={{ height: '400px'}}>
  {() => {
      const items = [...statesJson.states];

      class SearchStory extends React.Component {
        constructor(props) {
          super(props);

          this.state = {
            inputValue: '',
            selectedItem: ''
          };

          this.searchChanged = this.searchChanged.bind(this);
          this.clearSearch = this.clearSearch.bind(this);
          this.onUserAction = this.onUserAction.bind(this);
        }

        searchChanged(e) {
          this.setState({
            selectedItem: e
          });
        };

        clearSearch() {
          this.setState({
            inputValue: '',
            selectedItem: ''
          });
        };

        onUserAction(inputValue, selectedItemVal) {
          this.setState({
            inputValue: inputValue,
            selectedItem: selectedItemVal
          });
        };

        render() {
          return (
            <Search
              virtualized
              virtualizedMenuWidth={250}
              inputValue={this.state.inputValue}
              selectedItem={this.state.selectedItem}
              items={items}
              onChange={this.searchChanged}
              onUserAction={this.onUserAction}
              onRequestClear={this.clearSearch}
            />
          );
        }
      }

      return <SearchStory />;
    }}

</Playground>

## Custom Styled Input

<Playground style={{ background: "#0074B9" }}>
  {() => {
      class SearchStory extends React.Component {
        constructor(props) {
          super(props);

          this.state = {
            inputValue: ''
          };

          this.clearSearch = this.clearSearch.bind(this);
          this.onUserAction = this.onUserAction.bind(this);
        }

        clearSearch() {
          this.setState({
            inputValue: ''
          });
        };

        onUserAction(inputValue) {
          this.setState({
            inputValue: inputValue
          });
        };

        render() {
          return (
            <StyledSearch
              minimal
              fullWidth
              searchIcon={
                <MagnifyingGlassIcon
                  filled
                  size={16}
                  color={CalciteTheme.palette.lighterBlue}
                />
              }
              clearIcon={
                <XCircleIcon
                  filled
                  size={16}
                  color={CalciteTheme.palette.white}
                />
              }
              inputValue={this.state.inputValue}
              onUserAction={this.onUserAction}
              onRequestClear={this.clearSearch}
            />
          );
        }
      }

      return <SearchStory />;
    }}

</Playground>

## Props

<PropsTable of={Search} />
